<%# here starts REQUESTS section %>

<div class="container">
<h1>My Requests</h1>
  <div class="cards">
    <% @booking_requests.each do |request| %>
        <div class="card">
          <div class="card-img">
             <%= cl_image_tag(request.skill.photo.key, class: "card-img-top", crop: :thumb, gravity: :face) %>
          </div>
          <div class="card-body">
          <h5 class="card-title"><%= request.skill.name %></h5>
            <%# add user-avatar %>
            <p class="card-text"><%= request.skill.category %></p>
            <br>
            <h6 class="card-title">ðŸ—“ <%= request.date %></h6>
            <%# <h6 class="card-title">Status: <%= request.status %></h6>

            <%# accept or reject forms using tutorial https://dev.to/dmbf29/updating-a-booking-status-2ihh %>
            <div class="booking-actions">
              <% if request.pending? %>
                <%= simple_form_for request do |f| %>
                  <%= f.input :status, as: :hidden, input_html: { value: 'accepted'} %>
                  <%= f.submit 'Accept', class: 'btn btn-custom btn-success' %>
                <% end %>
                <%= simple_form_for request do |f| %>
                  <%= f.input :status, as: :hidden, input_html: { value: 'rejected'} %>
                  <%= f.submit 'Reject', class: 'btn btn-custom btn-danger' %>
                <% end %>
              <% else %>
                <p class='booking-tag'>Status: <%= request.status %></p>
              <% end %>
            </div>
          </div>
        </div>
    <% end %>
  </div>
</div>
<%# here ends REQUESTS section %>

<%# here starts BOOKINGS section %>
<div class="container">
<h1>My Bookings</h1>
  <div class="cards">
    <% @bookings.each do |booking| %>
      <div class="card">
        <div class="card-img">
           <%= cl_image_tag(booking.skill.photo.key, class: "card-img-top", crop: :thumb, gravity: :face) %>
        </div>
        <div class="card-body">
          <h5 class="card-title"><%= booking.skill.name %></h5>
          <%# add user-avatar %>
          <h6 class="card-title">with <%= booking.skill.user["first_name"] %></h6>
          <p class="card-text"><%= booking.skill.category %></p>
          <br>
          <h6 class="card-title">ðŸ—“ <%= booking.date %></h6>
          <h6 class="card-title">Status: <%= booking.status %></h6>
          <%# button_to "Update", booking_path(:id) %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<%# here ends BOOKING section %>

<%# here starts OFFERS section %>
<div class="container">
  <h1>My Offers</h1>
  <div class="cards">
    <% @skills.each do |skill| %>
    <div class="card">
      <div class="card-img">
           <%= cl_image_tag(skill.photo.key, class: "card-img-top", crop: :thumb, gravity: :face) %>
      </div>
      <div class="card-body">
          <h5 class="card-title"><%= skill.name %></h5>

          <h5 class="card-title">By <%= skill.user["first_name"] %></h5>
          <%# <h5 class="card-title">By <%= skill.booking.date %></h5>
          <h6 class="card-subtitle"><%= skill.category %></h6>
      </div>
    </div>
      <% end %>
  </div>
</div>
<%# here ends OFFERS section %>
